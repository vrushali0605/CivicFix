<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CivicFix | You</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #cce7ff, #e0f7ff);
            color: #1e2a38;
            overflow-x: hidden;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            width: 80px;
            background: #001737;
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            transition: width 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }
        .sidebar.expanded {
            width: 260px;
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }
        .sidebar::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
        }

        .logo-container {
            text-align: center;
            padding: 15px 0;
            font-size: 22px;
            font-weight: bold;
            background: #1e2a38;
        }
        .logo-text {
            display: none;
        }
        .sidebar.expanded .logo-text {
            display: inline;
        }

        .menu {
            flex: 1;
            padding-top: 20px;
        }

        .sidebar a {
            display: flex;
            align-items: center;
            padding: 14px 20px;
            color: white;
            text-decoration: none;
            font-size: 16px;
            transition: background 0.2s ease;
        }
        .sidebar a:hover {
            background: #1e2a38;
        }
        .sidebar a i {
            font-size: 22px;
            margin-right: 0;
            transition: margin 0.3s ease;
        }
        .sidebar.expanded a i {
            margin-right: 12px;
        }
        .link-text {
            display: none;
            white-space: nowrap;
        }
        .sidebar.expanded .link-text {
            display: inline;
        }

        .logout {
            background: #c0392b;
            text-align: center;
            margin: 20px;
            border-radius: 6px;
        }
        .logout:hover {
            background: #a93226;
        }

        .toggle-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #2a4469;
            color: #fff;
            padding: 10px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 20px;
            z-index: 1100;
            transition: left 0.3s ease;
        }
        .sidebar.expanded ~ .toggle-btn {
            left: 280px;
        }

        .content {
            margin-left: 80px;
            padding: 20px;
            transition: margin-left 0.3s ease;
        }
        .sidebar.expanded ~ .content {
            margin-left: 260px;
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -260px;
            }
            .sidebar.expanded {
                left: 0;
                width: 260px;
            }
            .sidebar.expanded ~ .content {
                margin-left: 0;
            }
            .sidebar.expanded ~ .toggle-btn {
                left: 280px;
            }
        }

        /* Cards and Table */
        .cards {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .card {
            flex: 1;
            min-width: 180px;
            background: #003366;
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        .card h2 {
            font-size: 2em;
            margin: 0;
        }
        .recent {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        .recent table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .recent th, .recent td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .recent th {
            background: #f1f1f1;
        }

        /* ---- NEW STATIC SECTION ---- */
        .help-section {
            margin-top: 40px;
            background: linear-gradient(135deg, #003366, #004c99);
            color: white;
            border-radius: 15px;
            padding: 30px;
            display: flex;
            align-items: center;
            gap: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            animation: fadeInUp 1.2s ease;
        }

        .help-section img {
            width: 220px;
            height: 220px;
            border-radius: 12px;
            object-fit: cover;
            animation: float 3s ease-in-out infinite;
        }

        .help-text {
            flex: 1;
        }

        .help-text h2 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .help-text p {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .whatsapp-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background-color: #25D366;
            color: white;
            padding: 12px 18px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: bold;
            transition: transform 0.2s ease, background 0.3s ease;
        }

        .whatsapp-btn:hover {
            transform: scale(1.05);
            background-color: #1da851;
        }

        @keyframes fadeInUp {
            from {opacity: 0; transform: translateY(40px);}
            to {opacity: 1; transform: translateY(0);}
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>

<div class="sidebar" id="sidebar">
    <div class="logo-container">
        <span class="logo-icon">âš™</span>
        <span class="logo-text">CivicFix</span>
    </div>
    <div class="menu">
        <a href="{{url_for('view_profile')}}"><i class='bx bxs-user'></i><span class="link-text">View My Profile</span></a>
        <a href="{{url_for('view_complaints')}}"><i class='bx bxs-file'></i><span class="link-text">View Uploaded Complaints</span></a>
        <a href="{{url_for('view_status')}}"><i class='bx bxs-check-circle'></i><span class="link-text">View Status of Complaints</span></a>
        <a href="{{url_for('view_escalations')}}"><i class='bx bxs-flag-alt'></i><span class="link-text">View Escalations</span></a>
        <a href="{{url_for('feedback')}}"><i class='bx bx-edit'></i><span class="link-text">Add Feedback</span></a>
    </div>
    <a href="{{url_for('logout')}}" class="logout"><i class='bx bxs-exit'></i><span class="link-text">Logout</span></a>
</div>

<div class="toggle-btn" id="toggleBtn">&#9776;</div>

<div class="content">
    <h1><div class="header">Hello, CivicStar! ðŸ‘‹</div></h1>
    <div class="subheader">Welcome to your CivicFix Dashboard</div>

    <!-- Stats Cards -->
    <div class="cards">
        <div class="card">
            <h2>{{ total_complaints }}</h2>
            <p>Total Complaints</p>
        </div>
        <div class="card">
            <h2>{{ resolved }}</h2>
            <p>Resolved Complaints</p>
        </div>
        <div class="card">
            <h2>{{ pending }}</h2>
            <p>Pending Complaints</p>
        </div>
        <div class="card">
            <h2>{{ escalations }}</h2>
            <p>Escalations</p>
        </div>
    </div>

    <!-- Recent Complaints Table -->
    <div class="recent">
        <h3>Recent Complaints</h3>
        <table>
            <tr>
                <th>Subject</th>
                <th>Status</th>
                <th>Created At</th>
            </tr>
            {% for c in recent_complaints %}
            <tr>
                <td>{{ c['subject'] }}</td>
                <td>{{ c['status'] or 'No Status' }}</td>
                <td>{{ c['created_at'] }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>

    <!-- ðŸš€ NEW STATIC BLOCK BELOW TABLE -->
    <div class="help-section">
        <img src="https://cdn-icons-png.flaticon.com/512/4149/4149678.png" alt="CivicFix Help">
        <div class="help-text">
            <h2>Become a CityFixer Today ðŸŒŸ</h2>
            <p>Help us make real change happen!
You can actively contribute by helping CivicFix teams solve actually reported issues related to roads, water, electricity, and garbage.
Volunteer to verify issues, spread awareness, or assist in local fixes â€” and earn your official CivicStar Certificate as recognition for improving your cityâ€™s future. ðŸŒŸ.</p>
            <a href="https://wa.me/918999909545" target="_blank" class="whatsapp-btn">
                <i class='bx bxl-whatsapp'></i> Contact Us on WhatsApp
            </a>
        </div>
    </div>
</div>

<script>
document.getElementById("toggleBtn").addEventListener("click", function () {
    document.getElementById("sidebar").classList.toggle("expanded");
});
</script>

</body>
</html>
